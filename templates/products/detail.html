{% extends 'base.html' %}

{% block title -%}
Products #{{product.id}}
{%- endblock %}

{% block body  -%}
<h2 id="product-name">{{ product.name_product }}
    {% if product.is_new %}
    <span class="badge bg-warning">New</span>
    {% endif %}
</h2>
 <style>
   a {
    text-decoration: none;
   }
  </style>
<hr>
<a href="{{ url_for('product_app.product_list') }}">Product list</a>

<section class="gallery min-vh-100">
    <div class="container-lg">
        <div class="row gy-4 row-cols-1 row-cols-sm-2 row-cols-md-3">
            <div class="col">
                <div class="col">
                    <img src="{{ url_for('static', filename='img/t_shirt.jpeg') }}" class="gallery-item" alt="gallery">
                </div>
                <h3 class="item-cart">
                    <code>{{ product.name_product -}}</code>
                    <ul>
                    {% for char in product.characters %}
                    <li><code>Size:
                        {{ char.size }}</code>
                    </li>
                    <li><code>Sex:
                        {{ char.sex }}</code>
                    </li>
                    <li class="desc-text">
                        <p class="lead">
                        {{ char.character_description }}
                        </p>

                    </li>
                    </ul>
                </h3>
                {% endfor %}
            </div>
        </div>
    </div>
    <div>
     <button id="add-product" class="btn btn-success">
     <a href="{{ url_for('cart_app.cart_list') }}">Add to cart</a>
     </button>
 </div>
</section>
<hr>
{# Admin area #}
 <div>
     <button id="delete-product" class="btn btn-danger">Delete</button>
 </div>
{%- endblock %}
{% block after_body %}
 <script>
    $(function () {
    const name = $('#product-name')
    console.log(name.text())

    $('#delete-product').click(function () {

    $.ajax({
        method: 'DELETE',
        success: function (res) {
            console.log(res)
            console.log(res.data)
        },
        error: function (err) {
            console.error(err)
            },
        complete: function () {
            window.location = '{{ url_for('product_app.product_list') }}'
        },
       })
      })
    });
</script>
{% endblock %}
